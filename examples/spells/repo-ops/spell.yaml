id: samples/repo-ops
version: 1.0.0
name: Repo Ops
summary: Simulate repository operations with connector permission guard
inputs_schema: ./schema.json
risk: medium
permissions:
  - connector: github
    scopes:
      - repo
      - contents:write
effects:
  - type: update
    target: repository
    mutates: true
billing:
  enabled: false
  mode: none
  currency: USD
  max_amount: 0
runtime:
  execution: host
  platforms:
    - darwin/arm64
    - darwin/x64
    - linux/amd64
    - linux/arm64
    - win32/x64
steps:
  - uses: shell
    name: prepare
    run: steps/prepare.js
checks:
  - type: exit_code
    params: {}
  - type: file_exists
    params:
      path: outputs/repo-ops.txt
