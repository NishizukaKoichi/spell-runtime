id: samples/publish-site
version: 1.0.0
name: Publish Site
summary: Simulate static site publish flow with high-risk confirmation guard
inputs_schema: ./schema.json
risk: high
permissions: []
effects:
  - type: build
    target: static-site
    mutates: true
  - type: deploy
    target: hosting
    mutates: true
billing:
  enabled: false
  mode: none
  currency: USD
  max_amount: 0
runtime:
  execution: host
  platforms:
    - darwin/arm64
    - darwin/x64
    - linux/amd64
    - linux/arm64
    - win32/x64
steps:
  - uses: shell
    name: build
    run: steps/build.js
  - uses: shell
    name: publish
    run: steps/publish.js
checks:
  - type: exit_code
    params: {}
  - type: file_exists
    params:
      path: artifacts/site/index.html
